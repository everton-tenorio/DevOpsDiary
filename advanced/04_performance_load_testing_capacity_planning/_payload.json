[{"data":1,"prerenderedAt":429},["ShallowReactive",2],{"advanced-04_performance_load_testing_capacity_planning":3},{"id":4,"title":5,"body":6,"description":414,"extension":415,"meta":416,"navigation":417,"path":418,"seo":419,"stem":420,"tags":421,"__hash__":428},"advanced/advanced/04_performance_load_testing_capacity_planning.md","Performance Engineering & Capacity Planning",{"type":7,"value":8,"toc":403},"minimark",[9,14,33,37,41,253,258,269,273,293,297,302,327,332,376,381,397,400],[10,11,13],"h2",{"id":12},"learning-objectives","Learning Objectives",[15,16,17,21,24,27,30],"ul",{},[18,19,20],"li",{},"Design realistic load tests that simulate production traffic patterns",[18,22,23],{},"Profile application and infrastructure bottlenecks at different layers",[18,25,26],{},"Implement SLO-based autoscaling driven by real business metrics",[18,28,29],{},"Build a capacity planning model that predicts resource needs from growth projections",[18,31,32],{},"Understand the relationship between performance, cost, and reliability",[10,34,36],{"id":35},"requirements","Requirements",[38,39,40],"p",{},"You are required to design and execute a comprehensive performance engineering practice for your platform:",[42,43,44,78,146,190,223],"ol",{},[18,45,46,50],{},[47,48,49],"strong",{},"Load Test Design",[15,51,52,69,72,75],{},[18,53,54,55],{},"Design load tests that simulate realistic traffic patterns using k6 or Gatling:\n",[15,56,57,60,63,66],{},[18,58,59],{},"Baseline test: current expected load, verify SLOs are met",[18,61,62],{},"Stress test: gradually increase load until SLOs are breached - find the breaking point",[18,64,65],{},"Spike test: sudden 10x traffic surge - measure recovery time",[18,67,68],{},"Soak test: sustained load over 24 hours - detect memory leaks and resource exhaustion",[18,70,71],{},"Define success criteria for each test type based on your SLOs",[18,73,74],{},"Instrument tests to export metrics directly to Prometheus/Grafana",[18,76,77],{},"Document the traffic model: request distribution, think time, user journey",[18,79,80,83],{},[47,81,82],{},"Bottleneck Profiling",[15,84,85,114,137,143],{},[18,86,87,88],{},"After each load test, identify the bottleneck layer:\n",[15,89,90,96,102,108],{},[18,91,92,95],{},[47,93,94],{},"Application layer",": CPU-bound, memory-bound, GC pressure, slow queries",[18,97,98,101],{},[47,99,100],{},"Database layer",": connection pool exhaustion, slow queries, lock contention",[18,103,104,107],{},[47,105,106],{},"Kubernetes layer",": HPA lag, resource limits causing throttling, DNS resolution latency",[18,109,110,113],{},[47,111,112],{},"Network layer",": ingress controller saturation, service mesh overhead",[18,115,116,117,121,122,121,125,128,129,132,133,136],{},"Use ",[118,119,120],"code",{},"kubectl top",", ",[118,123,124],{},"perf",[118,126,127],{},"async-profiler"," (JVM), ",[118,130,131],{},"py-spy"," (Python), or ",[118,134,135],{},"pprof"," (Go) for application profiling",[18,138,116,139,142],{},[118,140,141],{},"EXPLAIN ANALYZE"," for database query profiling",[18,144,145],{},"Document each bottleneck found: where it is, why it happens, and how you fixed it",[18,147,148,151],{},[47,149,150],{},"SLO-Based Autoscaling",[15,152,153,167,170,187],{},[18,154,155,156],{},"Implement KEDA scaling triggered by business metrics:\n",[15,157,158,161,164],{},[18,159,160],{},"Scale based on request queue depth (RabbitMQ, SQS, or Kafka lag)",[18,162,163],{},"Scale based on HTTP requests per second from Prometheus",[18,165,166],{},"Scale to zero during off-hours for non-critical services",[18,168,169],{},"Configure HPA with custom metrics from Prometheus Adapter",[18,171,172,173],{},"Define and test scale-up and scale-down policies:\n",[15,174,175,181],{},[18,176,177,178],{},"Scale up fast: ",[118,179,180],{},"scaleUp.stabilizationWindowSeconds: 0",[18,182,183,184],{},"Scale down slow: ",[118,185,186],{},"scaleDown.stabilizationWindowSeconds: 300",[18,188,189],{},"Measure: time from load spike to scaled-out state",[18,191,192,195],{},[47,193,194],{},"Capacity Planning Model",[15,196,197,217,220],{},[18,198,199,200],{},"Build a capacity planning spreadsheet or document covering:\n",[15,201,202,205,208,211,214],{},[18,203,204],{},"Current resource consumption per service (CPU, memory, storage, network)",[18,206,207],{},"Growth projections: 2x, 5x, 10x traffic scenarios",[18,209,210],{},"Resource requirements per scenario",[18,212,213],{},"Cost per scenario (using unit economics from FinOps task)",[18,215,216],{},"Infrastructure changes needed before each growth threshold",[18,218,219],{},"Define capacity buffers: never run above 70% of max capacity under normal conditions",[18,221,222],{},"Document the trigger points for proactive capacity expansion",[18,224,225,228],{},[47,226,227],{},"Performance Regression Prevention",[15,229,230,247,250],{},[18,231,232,233],{},"Integrate a performance test into the CI pipeline:\n",[15,234,235,241,244],{},[18,236,237,238],{},"Run a 60-second baseline load test on every merge to ",[118,239,240],{},"main",[18,242,243],{},"Fail the pipeline if p95 latency degrades > 20% compared to the last baseline",[18,245,246],{},"Archive test results as pipeline artifacts with trend charts",[18,248,249],{},"Configure a weekly soak test scheduled via CI",[18,251,252],{},"Document the performance baseline and how to update it",[254,255,257],"h3",{"id":256},"stretch-goals","Stretch Goals",[15,259,260,263,266],{},[18,261,262],{},"Implement Continuous Profiling with Pyroscope or Parca to track CPU/memory profiles over time",[18,264,265],{},"Run a database performance benchmark before and after query optimization",[18,267,268],{},"Simulate and measure the performance impact of different Kubernetes CNI plugins",[254,270,272],{"id":271},"deliverables","Deliverables",[15,274,275,278,281,284,287,290],{},[18,276,277],{},"k6 or Gatling test scripts for all four test types",[18,279,280],{},"Bottleneck analysis report with profiling evidence and fixes applied",[18,282,283],{},"KEDA and HPA configuration with custom metrics",[18,285,286],{},"Capacity planning document covering 2x, 5x, and 10x growth scenarios",[18,288,289],{},"CI pipeline with performance regression detection configured",[18,291,292],{},"Grafana dashboard showing load test results over time",[254,294,296],{"id":295},"references","References",[38,298,299],{},[47,300,301],{},"Books",[15,303,304,313,320],{},[18,305,306],{},[307,308,312],"a",{"href":309,"rel":310},"https://www.brendangregg.com/systems-performance-2nd-edition-book.html",[311],"nofollow","Systems Performance - Brendan Gregg",[18,314,315],{},[307,316,319],{"href":317,"rel":318},"https://www.oreilly.com/library/view/the-art-of/9780596518578/",[311],"The Art of Capacity Planning - John Allspaw",[18,321,322],{},[307,323,326],{"href":324,"rel":325},"https://www.oreilly.com/library/view/database-reliability-engineering/9781491925935/",[311],"Database Reliability Engineering - Laine Campbell & Charity Majors",[38,328,329],{},[47,330,331],{},"Tools and Documentation",[15,333,334,341,348,355,362,369],{},[18,335,336],{},[307,337,340],{"href":338,"rel":339},"https://k6.io/docs/",[311],"k6 Load Testing Documentation",[18,342,343],{},[307,344,347],{"href":345,"rel":346},"https://docs.gatling.io/",[311],"Gatling Documentation",[18,349,350],{},[307,351,354],{"href":352,"rel":353},"https://keda.sh/docs/",[311],"KEDA Documentation",[18,356,357],{},[307,358,361],{"href":359,"rel":360},"https://pyroscope.io/",[311],"Pyroscope Continuous Profiling",[18,363,364],{},[307,365,368],{"href":366,"rel":367},"https://github.com/kubernetes-sigs/prometheus-adapter",[311],"Prometheus Adapter for Custom Metrics",[18,370,371],{},[307,372,375],{"href":373,"rel":374},"https://www.brendangregg.com/linuxperf.html",[311],"Brendan Gregg's Performance Tools",[38,377,378],{},[47,379,380],{},"Articles",[15,382,383,390],{},[18,384,385],{},[307,386,389],{"href":387,"rel":388},"https://netflixtechblog.com/performance-under-load-3e6fa9a60581",[311],"Netflix: Performance Under Load",[18,391,392],{},[307,393,396],{"href":394,"rel":395},"https://sre.google/sre-book/load-testing/",[311],"Google: Site Reliability Engineering - Chapter 20: Load Testing",[398,399],"hr",{},[38,401,402],{},"Once you complete this task you will know exactly where your system breaks, how much traffic it can handle, and what infrastructure you need before the next growth milestone - replacing guesswork with evidence.",{"title":404,"searchDepth":405,"depth":405,"links":406},"",2,[407,408],{"id":12,"depth":405,"text":13},{"id":35,"depth":405,"text":36,"children":409},[410,412,413],{"id":256,"depth":411,"text":257},3,{"id":271,"depth":411,"text":272},{"id":295,"depth":411,"text":296},"Design load tests, profile system bottlenecks, and plan capacity using SLO-driven autoscaling","md",{},true,"/advanced/04_performance_load_testing_capacity_planning",{"title":5,"description":414},"advanced/04_performance_load_testing_capacity_planning",[422,423,424,425,426,427],"advanced","performance","load-testing","capacity-planning","sre","devops","OsyWLMZjqkFz36MlGeUWruiKO_WYpCKyNsOZjwXE-1c",1772285741260]